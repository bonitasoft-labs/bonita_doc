<!DOCTYPE html>
<html lang="">
<!-- head -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <title>Contracts and contexts</title>
    <!-- stylesheets -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css"> 
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">
    <link rel="stylesheet" href="/bonita_doc/assets/main.css">
    <!-- <link rel="stylesheet" href="/bonita_doc/assets/richleland-pygments-css/vs.css"> --> 
    <!-- jekyll-seo-tag -->
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Contracts and contexts | Bonitasoft Documentation Prototype</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Contracts and contexts" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Contracts and contexts. Contracts and contexts Overview. Overview. OverviewoverviewThe notion of contract is available at two levels process instantiation and human task execution. A contract is composed of inputs and constraints. Inputs are pieces of information that must be provided to the process or the human tas" />
<meta property="og:description" content="Contracts and contexts. Contracts and contexts Overview. Overview. OverviewoverviewThe notion of contract is available at two levels process instantiation and human task execution. A contract is composed of inputs and constraints. Inputs are pieces of information that must be provided to the process or the human tas" />
<link rel="canonical" href="http://0.0.0.0:4000/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts" />
<meta property="og:url" content="http://0.0.0.0:4000/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts" />
<meta property="og:site_name" content="Bonitasoft Documentation Prototype" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-01T11:29:20+02:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Contracts and contexts","dateModified":"2020-10-01T11:29:20+02:00","datePublished":"2020-10-01T11:29:20+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts"},"url":"http://0.0.0.0:4000/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts","description":"Contracts and contexts. Contracts and contexts Overview. Overview. OverviewoverviewThe notion of contract is available at two levels process instantiation and human task execution. A contract is composed of inputs and constraints. Inputs are pieces of information that must be provided to the process or the human tas","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- favicons and rss -->
    <link rel="alternate" type="application/rss+xml" title="Bonitasoft Documentation Prototype" href="/bonita_doc/feed.xml">
    <link rel="icon" type="image/png" sizes="32x32" href="/bonita_doc/assets/favicon/bonita-32_0.png">
</head>
<body>
    <!-- header --><div class="documentationHeader">
    <nav class="navbar navbar-default">
      <div id="top-links" class="container-fluid">
          <div class="row">
             <ul class="inline pull-right">
                 <li><a href="http://www.bonitasoft.com/about-us/news" style="color: white">News</a></li>
                 <li><a href="http://community.bonitasoft.com/" style="color: white">Community</a></li>
                 <li><a href="http://customer.bonitasoft.com/" style="color: white">Customer portal</a></li>
                 <li><a href="http://partner.bonitasoft.com/home" style="color: white">Partners</a></li>
             </ul>
          </div>
      </div>
      <div class="container-fluid main_nav">
        <div class="navbar-header">
          <a class="logo">
            <img alt="Bonitasoft" src="/bonita_doc/assets/img/logo_white.png">
          </a>
        </div>
        <ul class="nav navbar-nav">
          <li class="dropdown" >
            <a class="version" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Bonita <span class="caret"></span></a>
            <ul class="dropdown-menu">
                
                
                <li role="menuitem">
                        <a class="version" href="/bonita_doc/bonita/7.8">7.8 </a>
                </li>
      
                
                
                <!-- <li class="menu-item dropdown dropdown-submenu">
                    <a class="dropdown-toggle">Other versions</a>
                    <ul class="dropdown-menu">
                        <li >
                            <a href="" class="version"></a>
                        </li>
                    </ul>
                </li> -->
  
            </ul>
          </li>
          <li class="dropdown">
          <a class="version" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Add-ons <span class="caret"></span></a>
          <ul class="dropdown-menu" >

              
              
                
                    <li class="menu-item dropdown dropdown-submenu" >
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">bcd</a>
                        <ul class="dropdown-menu">
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="/bonita_doc/bcd/1.0">1.0</a>
                                </li>
                            
                            
                        </ul>
                    </li>
                
                
               
              
               
              
                
                    <li class="menu-item dropdown dropdown-submenu" >
                        <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">ici</a>
                        <ul class="dropdown-menu">
                            
                                <li class="addOnVersion" >
                                    <a class="version" href="/bonita_doc/ici/1.1">1.1</a>
                                </li>
                            
                            
                        </ul>
                    </li>
                
                
               
              
                
                
               
              
          </ul>
          </li>
        </ul>
        <div id="react-search"></div>
      </div>
     
    </nav>
  </div><div class="container-fluid">
        <div class="row">
            <div class="col-md-3"><div id="navigationHeader" class="documentationNavigationHeader">
    <h2><a href="/bonita_doc/bonita/7.10">
            
            <img src="/bonita_doc/assets/img/logo_bonita.png" />
            
                

                <span>Bonita  7.10</span>
        </a>
    </h2>
</div>

<div class="documentationNavigation">
  
    <!-- Create an array to store the current category --><!-- Start iterate in categories  -->
    <ul></ul>
</div></div>
            <div class="col-md-9 content--noPaddingRight" >
                <div class="documentationContent">
                    <div class="documentationPage">
                            <a href="https://github.com/bonitasoft/bonita-doc/edit/7.10/md/contracts-and-contexts.md" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
                       <article>
                        <h1 id="contracts-and-contexts">Contracts and contexts</h1>

<div class="list-group"><a href="/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts#overview" class="list-group-item toc-h2">Overview</a><a href="/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts#contract-purpose-and-value" class="list-group-item toc-h2">Contract purpose and value</a><a href="/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts#contract-definition" class="list-group-item toc-h2">Contract definition</a><a href="/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/contracts-and-contexts#context" class="list-group-item toc-h2">Context</a>
</div>
<h2 id="overview">Overview</h2>

<p id="overview">The notion of contract is available at two levels: process instantiation and human task execution. A contract is composed of inputs and constraints. Inputs are pieces of information that must be provided to the process or the human task. The constraints are applied to the input to check that the values of the inputs are valid.</p>

<p>As an example, a Leave Request Process could declare the following contract:</p>

<ul>
  <li>Inputs:
    <ul>
      <li>Start Date</li>
      <li>End Date</li>
      <li>Leave type</li>
    </ul>
  </li>
  <li>Constraints:
    <ul>
      <li>End Date after Start Date</li>
      <li>Start Date in the future</li>
      <li>Leave type in (“Annual Leave”, “Unpaid Leave”)</li>
    </ul>
  </li>
</ul>

<h2 id="contract-purpose-and-value">Contract purpose and value</h2>

<p>A contract specifies the pieces of information the process requires to be started. Without this information the process cannot execute its business logic, and it is not useful to try to start an instance of the process. That is to say, if you try to start an instance of the process without providing the expected input, the system will refuse to start the process. The same is true for a human task: if you try to perform the task without providing the expected input, the system will refuse to execute the task. A contract protects the process from malformed external interaction. After validation, the inputs are used to initialize business data, or process data, or are passed through connectors.</p>

<h2 id="contract-definition">Contract definition</h2>

<p>In Bonita Studio select the pool to create the process instantiation contract, or select a human task to create a task contract.
Go to the <strong>Details</strong> panel, <strong>Execution</strong> tab, <strong>Contract</strong> pane. In the Inputs tab, declare each expected input and its type. You have two options: declare the input manually or from a business variable using the <strong>Add from data</strong> option. Defining an input based on a variable saves you time, and is the preferred option if the aim of the input is to initialize (or update) the business variable. In addition, using <strong>Add from data</strong> on a task contract automatically generates <a href="/bonita_doc/bonita/7.10/application-and-process-design/define-access-control-on-business-objects/operations">operations</a> to update the selected business variables with the task inputs. In the Constraints tab, declare expressions that check the validity of the value of each input. A constraint has a name, a content, and a error message. The message is logged if the constraint is not met. Make sure to provide a meaningful name and message to help process users understand why the system rejected the order to start the process or execute a task.</p>

<p>In the Leave Request Process example, the contract inputs and the constraints would be similar to the following:</p>

<p><img src="images/images-6_0/contractDoc.PNG" alt="" class="img-responsive" /></p>

<p><img src="images/images-6_0/ConstraintsDoc.PNG" alt="" class="img-responsive" /></p>

<p>Stacktrace example in case of contract violation:
  <img src="images/images-6_0/constraintError.PNG" alt="" class="img-responsive" /></p>

<p>Supported input types:</p>

<ol>
  <li><strong>Boolean:</strong> accepts true or false values</li>
  <li><strong>complex:</strong> a tree structure that is equivalent to a key-value map where keys are fixed (e.g. if an input named user with children attributes firstname and lastname)</li>
  <li><strong>date:</strong> a date respecting the following pattern : yyyy-MM-dd or yyyy-MM-ddTHH:mm:ss or yyyy-MM-ddTHH:mm:ssZ or yyyy-MM-ddTHH:mm:ss.SSSz (ISO_8601)</li>
  <li><strong>decimal:</strong> a decimal value (e.g. 5.128)</li>
  <li><strong>file:</strong> a document</li>
  <li><strong>integer:</strong> a numeric value (e.g. 4)</li>
  <li><strong>long:</strong> a long value (e.g. 3 000 000 000). Can be used at pool-level only (not at task-level). In called processes, this is helpful to receive IDs from call activities.</li>
  <li><strong>text:</strong> a string</li>
</ol>

<p>Check <strong><em>multiple</em></strong> to specify that the input is a list of its primary type (for example, a list of integers).</p>

<div class="alert alert-info">
<p><strong><i class="fa fa-info-circle"></i></strong>  The type <code class="highlighter-rouge">long</code> can be used in a POST with JSON without precision lost. However, it is important to keep in mind that while manipulating numbers in javascript the max <code class="highlighter-rouge">integer</code> is 2^53-1 which is a smaller subset of Java max <code class="highlighter-rouge">long</code> type (2^63-1). Example:</p>

<ul>
  <li>If your value is in JavaScript safe integer range: Text widget (number) &gt; JavaScript number &gt; JSON number &gt; Contract java.lang.Long</li>
  <li>If value is out of JavaScript safe integer range: Text widget (text) &gt; JavaScript String &gt; JSON String &gt; Contract java.lang.Long</li>
</ul>
</div>

<p><strong>Constraints</strong></p>

<p>A constraint is a Groovy expression that returns a Boolean. If the value is false, the constraint is not met, so the contract not fulfilled and the system will not execute the instantiation or task.</p>

<p><strong>Note:</strong> the constraint scope is limited to contract input and cannot reference external systems (such as connectors, databases or bonita APIs).</p>

<p>When is the contract validated ?</p>

<p>Whatever means is used to submit information to process or human task, the system will validate the contract. If the contract is not satisfied, an exception is thrown and the process or human task is untouched. Information can be submitted by Java API call, REST API call, Bonita form, or an external system including a third-party form.</p>

<p><strong>Best practice:</strong> Define the contract prior to creating your forms. This will save you time during development phase as auto-generated forms enable you to submit information and validate that your contract definition is stable. After the contract is defined, you can go to UI Designer using top-right pencil icon of the Details panel. It will generate a form with the appropriate widget for each contract input to enable the user to provide the expected value.</p>

<h2 id="context">Context</h2>

<p>To display contextual information of the task or the process instance in a form, you can leverage the business data and document references made publicly available through the context. The notion of context is available at two levels : process instance and human task. The context is a list of references to the business data and documents manipulated by the process instance during its execution.
Currently, context is the same for a human task and its process instance. All the business data and documents defined are public.</p>

<p>Limitation : there is currently no way to customize which business data or document are public.</p>

                       </article>
                    </div>
                </div>
            
            </div>
        </div>
    </div>
    <!-- scripts --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
    <script src="/bonita_doc/assets/javascripts/active_link.js"></script>

    <script src="/bonita_doc/assets/javascripts/collapse.js"></script>
    <script src="/bonita_doc/assets/javascripts/bundle.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/react/0.14.7/react.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/react/0.14.7/react-dom.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/searchkit/0.10.0/bundle.js"></script></body>
</html>