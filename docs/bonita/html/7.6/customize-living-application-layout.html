<div style="position: relative;"><a href="https://github.com/bonitasoft/bonita-doc/edit/7.6/md/customize-living-application-layout.md"><img style="position: absolute; top: -1px; right: -40px; border: 0; z-index=-100;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a></div>
<h1>Customize the living application layout</h1>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> For Performance, Efficiency, and Teamwork editions only.</p>
</div>
<div class="alert alert-warning" role="alert">
<p>In 7.6 we made some improvements on the default layout.
We recommand that you re-create your custom layout based on Bonita 7.6.0+ default layout.</p>
</div>
<h2>Overview</h2>
<p>As explained in the <a href="?page=layouts" ng-click="contentCtrl.goTo($event, 'layouts')">layouts</a> documentation page, it is possible to customize the existing application layout with the UI Designer.
Keep in mind that this default layout is composed by tree containers: layout-header, layout-content, layout-footer. But only layout-header and layout-footer are designed to support additional widgets.</p>
<p>Prerequisites to customize the default living application layout:</p>
<ul>
<li>Basic knowledge of Java script</li>
<li>Basic knowledge of AngularJS</li>
<li>Basic knowledge of Bootstrap</li>
<li>Basic knowledge of the UI Designer</li>
<li>An existing living application (to test the modified layout)</li>
</ul>
<p>The following example shows how to add new widget into the default layout.<br>
The example sections show how to:</p>
<ul>
<li>Export the default application layout from Bonita Portal</li>
<li>Import the default application layout into the UI Designer</li>
<li>Modify this layout</li>
<li>Apply the customized layout onto a living application.</li>
</ul>
<h2>Export the default application layout from Bonita Portal</h2>
<ol>
<li>Open Bonita Portal, and log in with username and password of someone mapped to the Administrator profile.</li>
<li>Click on the <strong>Resources</strong> menu.</li>
<li>Select the filter <strong>Layouts</strong>.</li>
<li>Select the element <em>Default layout</em>.</li>
<li>Click on <strong>Export</strong> and save this <em>Default layout</em> on your file system.</li>
</ol>
<h2>Import the default application layout into the UI Designer</h2>
<p>To facilitate the modifications, the <em>Default layout</em> is built using the UI Designer. Therefore you just have to import it into the UI Designer to make changes.</p>
<ol>
<li>Open the UI Designer.</li>
<li>Click on the <strong>Import</strong> button.</li>
<li>Retrieve the <em>Default layout</em> to import.</li>
</ol>
<h2>Edit the default layout using the UI Designer</h2>
<p>When you import the <em>Default layout</em> into the UI Designer, you can see that it generates three artefacts:</p>
<ol>
<li><em>Living application layout page</em>.</li>
<li><em>Living application IFrame</em> widget to display the application page.</li>
<li><em>Living application menu</em> widget to display the application menu.</li>
</ol>
<p>So we propose here to add new widgets to the <strong>Living application layout page</strong> header and footer.</p>
<p>In the UI Designer:</p>
<ol>
<li>Click on <strong>Living application layout page</strong> to open it in the page editor.</li>
<li>See that this page is composed by three main containers <strong>layout-header</strong>, <strong>layout-content</strong>, <strong>layout-footer</strong>.</li>
<li>Drag and drop an image widget on top of the menu in the <strong>layout-header</strong>, to display a brand image.</li>
<li>Drag and drop a title widget in the <strong>layout-footer</strong>, to display a &quot;Copyright Â© 2017, Example Corporation&quot;</li>
<li>Click on <strong>Save</strong>.</li>
</ol>
<h2>Export the customized layout on your file system</h2>
<p>Once your changes are made, save the new layout using a new name and then export it.</p>
<ol>
<li>Rename it into <em>myCustomLayout</em>.</li>
<li>Click on <strong>Save</strong>.</li>
<li>Click on the <strong>Export</strong> button.</li>
</ol>
<h2>Import the <em>myCustomLayout</em> into the portal</h2>
<ol>
<li>Open Bonita Portal, and again log in with username and password of someone mapped to the Administrator profile.</li>
<li>Click on the <strong>Resources</strong> menu.</li>
<li>Click on <strong>Add</strong>.</li>
<li>Add the new <em>myCustomLayout</em>.</li>
<li>Click <strong>Next</strong>.</li>
<li>Click <strong>Confirm</strong>.</li>
</ol>
<h2>Configure your living application to use the modified layout</h2>
<ol>
<li>Click on the <strong>Applications</strong> menu.</li>
<li>Click on the edit action <strong>...</strong> of your living application.</li>
<li>In the <strong>Look &amp; Feel</strong> section, click on the <strong>Layout</strong> link</li>
<li>Select the <em>myCustomLayout</em></li>
<li>Click on the validation button</li>
<li>In the <strong>Application details</strong> section, click on the URL link to navigate to your living application.</li>
<li>See your new application layout with a custom layout.</li>
<li>Feel free to add lots of new improvements to create the layout that fits your needs.</li>
</ol>
<h2>Build a Side menu layout</h2>
<p>As of version 7.5.x, the default provided layout does not allow this kind of customization anymore (at least not so easily), but if you start from a 7.4.x Layout you can follow the 7.4 documentation <a href="?hash=toc3&amp;page=%2F7.4%3Fpage%3Dcustomize-living-application-layout" ng-click="contentCtrl.goTo($event, '/7.4?page=customize-living-application-layout', 'toc3')">customize-living-application-layout</a> to build a side menu layout.</p>
<h2>Take advantage of the latest improvement in a customized layout</h2>
<a id="improve-navigation"/>
<h3>Navigate between pages without reloading the entire page.</h3>
<p>Starting with Bonita 7.6.0, when the user clicks on any menu item, only the content of the iframe with the targeted page is refreshed: it does not reload the entire page anymore. The HTML5 History API is used to achieve that.<br>
To take advantage of this improvement if your customized layout has been created with a Bonita version older than 7.6.0, you will need to follow these steps:</p>
<ol>
<li>Import your <em>CustomLayout_7.5.x</em> (or lower) in the UI Designer 7.6.0 (or later versions)</li>
<li>Export the <em>Default layout</em> from Bonita Portal 7.6.0 (or later versions)</li>
<li>Import the <em>Default layout</em> in the UI Designer</li>
<li>Open your <em>CustomLayout_7.5.x</em></li>
<li>If any of the custom widgets <em>livingApplicationMenu</em> or <em>livingApplicationIFrame</em> has been modified,<br>
you will need to merge your modifications and the modifications of the new version of those widgets, namely <em>livingApplicationMenuV3</em> and <em>livingApplicationIFrameV3</em>.</li>
</ol>
<p>Note 1: To help this merge, you can generate a diff, between two version of the default layout by using Git.
If you don't already have <a href="https://git-scm.com/">Git</a>, you will need to install it, then clone the repository &quot;https://github.com/bonitasoft/bonita-distrib.git&quot;.
At the root level, run the following command:  &quot;git diff 7.5.0 7.6.0 -- ./community/resources/layout-page/src/main/resources&quot;</p>
<p>Note 2: A good practice would be to rename those merged widgets into something like <em>myCustomizedMenuV3</em> and <em>myCustomizedIFrameV3</em>)</p>
<ol start="6">
<li>Replace the custom widget <em>livingApplicationMenu</em> by the new custom widget <em>livingApplicationMenuV3</em> (or your <em>myCustomizedMenuV3</em>)</li>
<li>Replace the custom widget <em>livingApplicationIFrame</em> by the new custom widget <em>livingApplicationIFrameV3</em>  (or your <em>myCustomizedIFrameV3</em>)</li>
<li>Export this updated layout page.</li>
<li>In Bonita portal, edit the layout and import the newly exported layout</li>
<li>Confirm all messages</li>
<li>Validate that your application has a layout that fits your requirements and the new menu behaviour.</li>
</ol>
<h2>Troubleshooting</h2>
<h3>Living application layout log 3 error 500 on loading</h3>
<p>This issue has been fixed in the 7.3.0 version (&quot;[BS-14885] - Living application layout log 3 error 500 on loading&quot;).
If you want to import a custom layout created with a UI Designer older than version 7.3.0 into an application working with Bonita 7.3.0 or greater, you have to perform the following steps to prevent the issue from occurring:</p>
<ol>
<li>Import the CustomLayout_7.2.x in UI Designer 7.3.3</li>
<li>Export the default layout from Bonita Portal</li>
<li>Import the default layout and confirm that custom widgets will be overwritten</li>
<li>Open the CustomLayout_7.2.x Layout and remove the 3 variables <em>AuthorizeApplicationAPI</em>, <em>AuthorizeApplicationPageAPI</em> and <em>AuthorizeApplicationMenuAPI</em> (as shown below)
Those variables are responsible of the SEVERE error logs on server.</li>
<li>Select the iFrame widget and set the <strong>reziseToContent</strong> option to <em>yes</em> (this option has been removed in 7.6.0, as the iframe is now resized using CSS)</li>
<li>Save then Export the layout (feel free to rename the layout if you want)</li>
<li>On Bonita Portal edit the layout and import the newly exported layout</li>
<li>Confirm all messages</li>
<li>Validate that your application has a layout that fits your requirements.</li>
</ol>
<h3>Ui-bootstrap.js library removed from runtime</h3>
<p>In our first design iteration, forms, pages and layouts designed with the UI Designer embedded
<a href="http://angular-ui.github.io/bootstrap/versioned-docs/0.13.4/">UI Bootstrap js, version 0.13.4</a> by default and silently, even when not needed.
This issue has been fixed in version 7.5.0, we removed it so you can embed it as an asset only when you need it, and in the version of your choice.</p>
<p>Before this change, custom widgets could be created based on angular-bootstrap v0.13.0 with no explicit addition of
angular-bootstrap as an asset and without declaring required modules.</p>
<p>This will not affect any artifact that has been created with the UI Designer and is currently deployed in Bonita Platform.</p>
<p>In development though, if your custom widgets use angular-bootstrap, you need to add angular-bootstrap as an asset at widget level, and declare the appropriate required modules.</p>
<h4>Forms, pages, layouts CSS cleaned</h4>
<p>This cleaning has been made in 7.5.0 version, The default CSS file embedded in UI Designer artifacts (except custom widgets) has been cleaned. Indeed, some of this CSS
rules were overall not used and cluttered this file.</p>
<p>This will not affect any artifact that has been created with the UI Designer and is currently deployed in Bonita Platform.</p>
<p>Nevertheless some unwanted style could appear when importing a custom layout based on the default layout of Bonita prior to 7.5.0.
If you do so and observe that the layout menu does not fit the whole width of your page, you can bring back the default
style by adding the following lines in <code>layout.css</code> file.</p>
<pre><code class="language-css">.component .container {
     width: 100%;
 }
</code></pre>
<!-- Generated on Fri Jan 19 2018 16:08:27 GMT+0100 (Paris, Madrid) -->