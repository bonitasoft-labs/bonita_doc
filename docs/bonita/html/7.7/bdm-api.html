<div style="position: relative;"><a href="https://github.com/bonitasoft/bonita-doc/edit/7.7/md/bdm-api.md"><img style="position: absolute; top: -1px; right: -40px; border: 0; z-index=-100;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a></div>
<h1>Business Data Model (BDM) API</h1>
<p>BDM Rest APIs allow to query Bonita Business Data.</p>
<p>Access to the BDM Rest APIs depends on the <a href="bonita/7.7/rest-api-authorization" ng-click="contentCtrl.goTo($event, 'rest-api-authorization')">REST API authorization</a> settings.</p>
<h2>Business Data</h2>
<h4>Description</h4>
<p>Retrieve business data value. Depending on the object attribute loading policy, the API returns either the full object in JSON representation or the HATEOAS links to the object attributes.</p>
<h4>Identifier</h4>
<p>The fully qualified name (businessDataType) and the persistenceId of the business data (a long value).</p>
<h4>Representation</h4>
<p>Representation of object attributes with an <em>always load</em> policy:</p>
<pre><code class="language-json">{
  &quot;persistenceId&quot;: _number_,
  &quot;persistenceId_string&quot;: &quot;_number_&quot; 
  &quot;persistenceVersion&quot;: _number_,
  &quot;persistenceVersion_string&quot;: &quot;_number_&quot;
  &quot;attributeName&quot;:_attributeType_
  ...
}
</code></pre>
<p>The string representation added in 7.0.1 for Long attributes is a workaround for the JavaScript integer spectrum issue.</p>
<p>HATEOAS representation of object attribute with a <em>load when needed</em> policy:</p>
<pre><code class="language-json">&quot;links&quot;:[
   {
   &quot;rel&quot;:_string_
   &quot;href&quot;:_uri_
   }
]
</code></pre>
<h4>Methods</h4>
<p>The methods used for this resource are:</p>
<ul>
<li>GET</li>
</ul>
<h4>Get the business data</h4>
<p>Get the business data specified by its identifier.</p>
<ul>
<li><strong>URL</strong><br>
<code>/API/bdm/businessData/:businessDataType/:persistenceId</code><br>
<em>Example</em>: <code>/API/bdm/businessData/com.company.model.Contract/1</code></li>
<li><strong>Method</strong><br>
<code>GET</code></li>
<li><strong>Success Response</strong><br>
A business data (in JSON format)
<ul>
<li><strong>Code</strong>: 200</li>
<li><strong>Payload</strong>:<br>
With business data containing always-loaded object attributes:<pre><code class="language-json">{
  &quot;persistenceId&quot;: 1,
  &quot;persistenceId_string&quot;: &quot;1&quot;,
  &quot;persistenceVersion&quot;: 0,
  &quot;persistenceVersion_string&quot;: &quot;0&quot;,
  &quot;contractName&quot;: &quot;contract for Netcom3&quot;,
  &quot;terms&quot;: [{
    &quot;persistenceId&quot;: 1,
    &quot;persistenceId_string&quot;: &quot;1&quot;,
    &quot;persistenceVersion&quot;: 0,
    &quot;persistenceVersion_string&quot;: &quot;0&quot;,
    &quot;termName&quot;: &quot;term Name&quot;
    },
    {
      &quot;persistenceId&quot;: 2,
      &quot;persistenceId_string&quot;: &quot;2&quot;,
      &quot;persistenceVersion&quot;: 0,
      &quot;persistenceVersion_string&quot;: &quot;0&quot;,
      &quot;termName&quot;: &quot;term Name&quot;
    }
  ],
  &quot;client&quot;: {
    &quot;persistenceId&quot;: 13,
    &quot;persistenceId_string&quot;: &quot;13&quot;,
    &quot;persistenceVersion&quot;: 0,
    &quot;persistenceVersion_string&quot;: &quot;0&quot;,
    &quot;clientName&quot;: &quot;client name&quot;,
    &quot;description&quot;: &quot;n/a&quot;,
    &quot;industry&quot;: [{
        &quot;persistenceId&quot;: 2,
        &quot;persistenceId_string&quot;: &quot;2&quot;,
        &quot;persistenceVersion&quot;: 0,
        &quot;persistenceVersion_string&quot;: &quot;0&quot;,
        &quot;industryName&quot;: &quot;Services&quot;
      }, {
        &quot;persistenceId&quot;: 3,
        &quot;persistenceId_string&quot;: &quot;3&quot;,
        &quot;persistenceVersion&quot;: 0,
        &quot;persistenceVersion_string&quot;: &quot;0&quot;,
        &quot;industryName&quot;: &quot;Software&quot;
      }
    ]
  }
}
</code></pre>
With business data containing loaded-when-needed object attributes<pre><code class="language-json">{
  &quot;persistenceId&quot;: 2,
  &quot;persistenceId_string&quot;: &quot;2&quot;,
  &quot;persistenceVersion&quot;: 0,
  &quot;persistenceVersion_string&quot;: &quot;0&quot;,
  &quot;clientName&quot;: &quot;Affectiva&quot;,
  &quot;description&quot;: &quot;n/a&quot;,
  &quot;links&quot;: [{
    &quot;rel&quot;: &quot;industry&quot;,
    &quot;href&quot;: &quot;/API/bdm/businessData/com.company.model.Client/2/industry&quot;
  }]
}
</code></pre>
</li>
</ul>
</li>
<li><strong>Error Response</strong><br>
When business data identifier is not valid
<ul>
<li><strong>Code</strong>: 500</li>
</ul>
</li>
</ul>
<h4>Get the business data attribute of business data</h4>
<p>Gets the business data attribute of business data according to its identifier and attribute name.
Request url</p>
<ul>
<li><strong>URL</strong><br>
<code>http://../API/bdm/businessData/:businessDataType/:persistenceId/:attributeName</code><br>
<em>Example</em>: <code>/API/bdm/businessData/com.company.model.Client/2/industry</code></li>
<li><strong>Method</strong><br>
<code>GET</code></li>
<li><strong>Success Response</strong><br>
A business data (in JSON format)
<ul>
<li><strong>Code</strong>: 200</li>
<li><strong>Payload</strong>:<pre><code class="language-json">{
  &quot;persistenceId&quot;: 2,
  &quot;persistenceId_string&quot;: &quot;2&quot;,
  &quot;persistenceVersion&quot;: 0,
  &quot;persistenceVersion_string&quot;: &quot;0&quot;,
  &quot;industryName&quot;: &quot;Services&quot;
}
</code></pre>
</li>
</ul>
</li>
<li><strong>Error Response</strong><br>
When business data identifier or attribute name is not valid
<ul>
<li><strong>Code</strong>: 500</li>
</ul>
</li>
</ul>
<h4>Get several business data</h4>
<p>Get the business data specified by their identifiers.</p>
<ul>
<li><strong>URL</strong><br>
<code>http://../API/bdm/businessData/:businessDataType/findByIds</code><br>
<em>Example</em>: <code>/API/bdm/businessData/com.company.model.Contract/findByIds?ids=1,83</code></li>
<li><strong>Method</strong><br>
<code>GET</code></li>
<li><strong>Data Params</strong>
<ul>
<li>ids - list of persistenceIds (comma separated)</li>
</ul>
</li>
<li><strong>Success Response</strong><br>
An array of business data (in JSON format). It can be an empty array if no identifiers refer to existing data.
<ul>
<li><strong>Code</strong>: 200</li>
<li><strong>Payload</strong>:<br>
With business data containing always loaded object attributes<pre><code class="language-json">[{
  &quot;persistenceId&quot;: 1,
  &quot;persistenceId_string&quot;: &quot;1&quot;,
  &quot;persistenceVersion&quot;: 0,
  &quot;persistenceVersion_string&quot;: &quot;0&quot;,
  &quot;contractName&quot;: &quot;contract for Netcom3&quot;,
  &quot;terms&quot;: [{
      &quot;persistenceId&quot;: 1,
      &quot;persistenceId_string&quot;: &quot;1&quot;,
      &quot;persistenceVersion&quot;: 0,
      &quot;persistenceVersion_string&quot;: &quot;0&quot;,
      &quot;termName&quot;: &quot;term Name&quot;
    },
    {
      &quot;persistenceId&quot;: 2,
      &quot;persistenceId_string&quot;: &quot;2&quot;,
      &quot;persistenceVersion&quot;: 0,
      &quot;persistenceVersion_string&quot;: &quot;0&quot;,
      &quot;termName&quot;: &quot;term Name&quot;
    }
  ],
  &quot;client&quot;: {
    &quot;persistenceId&quot;: 13,
    &quot;persistenceId_string&quot;: &quot;13&quot;,
    &quot;persistenceVersion&quot;: 0,
    &quot;persistenceVersion_string&quot;: &quot;0&quot;,
    &quot;clientName&quot;: &quot;client name&quot;,
    &quot;description&quot;: &quot;n/a&quot;,
    &quot;industry&quot;: [{
      &quot;persistenceId&quot;: 2,
      &quot;persistenceId_string&quot;: &quot;2&quot;,
      &quot;persistenceVersion&quot;: 0,
      &quot;persistenceVersion_string&quot;: &quot;0&quot;,
      &quot;industryName&quot;: &quot;Services&quot;
      }, {
        &quot;persistenceId&quot;: 3,
        &quot;persistenceId_string&quot;: &quot;3&quot;,
        &quot;persistenceVersion&quot;: 0,
        &quot;persistenceVersion_string&quot;: &quot;0&quot;,
        &quot;industryName&quot;: &quot;Software&quot;
    }]
  }
}]
</code></pre>
</li>
</ul>
</li>
</ul>
<h2>BusinessDataQuery</h2>
<h4>Description</h4>
<p>The business data query REST API resource is used to call a default or custom business data query.
It is available from version 6.5.</p>
<h4>Identifier</h4>
<p>../API/bdm/businessData/<em>businessDataType</em>?q=<em>queryName</em></p>
<h4>Representation</h4>
<p>A JSON representation of the query result.</p>
<h4>Methods</h4>
<p>The methods used for this resource are:</p>
<ul>
<li>GET - Call a named query</li>
</ul>
<h4>Call a business data named query</h4>
<p>The query can be either a default or a custom query.</p>
<ul>
<li>
<p><strong>URL</strong><br>
<code>http://../API/bdm/businessData/_businessDataType_?q=_queryName_&amp;p=0&amp;c=10&amp;f=param=value</code><br>
<em>Example</em>: Call the findEmployeeByFirstNameAndLastName query :</p>
<pre><code>/API/bdm/businessData/com.company.model.Employee?q=findEmployeeByFirstNameAndLastName&amp;p=0&amp;c=10&amp;f=firstName=John&amp;f=lastName=Doe
</code></pre>
</li>
<li>
<p><strong>Method</strong><br>
<code>GET</code></p>
</li>
<li>
<p><strong>Data parameters</strong>:</p>
<ul>
<li>businessDataType - the fully-qualified business data type name</li>
<li>q=queryName - the query name</li>
<li>p=0 - the page number</li>
<li>c=10 - the maximum number of results in the page</li>
<li>f=parameter=value - sets the parameter value according to business data query parameters defined in Bonita Studio
For a Boolean parameter, the accepted values are <code>true</code> or <code>false</code>.</li>
</ul>
<p>By default, for a Date parameter can use the following formats:</p>
<ul>
<li>yyyy-MM-dd</li>
<li>HH:mm:ss</li>
<li>yyyy-MM-dd HH:mm:ss</li>
<li>yyyy-MM-dd'T'HH:mm:ss</li>
<li>yyyy-MM-dd'T'HH:mm:ss.SSS</li>
</ul>
</li>
<li>
<p><strong>Success Response</strong><br>
JSON representation of query result</p>
<ul>
<li><strong>Code</strong>: 200</li>
<li><strong>Payload</strong>:<pre><code class="language-json">[
  {
    &quot;persistenceId&quot;: 1,
    &quot;persistenceId_string&quot;: &quot;1&quot;,
    &quot;persistenceVersion&quot;: 0,
    &quot;persistenceVersion_string&quot;: &quot;0&quot;,
    &quot;firstName&quot;: &quot;John&quot;,
    &quot;lastName&quot;: &quot;Doe&quot;,
    &quot;phoneNumbers&quot;: [&quot;123456789&quot;],
    &quot;addresses&quot;: [{}],
    &quot;links&quot;: [{
      &quot;rel&quot;: &quot;address&quot;,
      &quot;href&quot;: &quot;/businessdata/com.company.model.Employee/1/address&quot;
      }
    ]
  }
]
</code></pre>
</li>
</ul>
</li>
</ul>
<h2>BusinessDataReference</h2>
<div class="alert alert-warning" role="alert">
<p>Deprecated (since 7.0.0)</p>
<p>Use <a href="bonita/7.7/bpm-api" ng-click="contentCtrl.goTo($event, 'bpm-api', 'retrieve-the-case-context')" class="alert-link">case context API</a> to get business data references for a case
and <a href="bonita/7.7/bpm-api" ng-click="contentCtrl.goTo($event, 'bpm-api', 'retrieve-the-usertask-context')" class="alert-link">task context API</a> to get business data references for a task.</p>
</div>
<h4>Description</h4>
<p>A business data reference is a link between the business data and the case. The reference can be either single or
multiple depending on the process.</p>
<h4>Identifier</h4>
<p>The reference name (a string value).</p>
<h4>Representation</h4>
<p>Single reference:</p>
<pre><code class="language-json">{
  &quot;name&quot;:&quot;_string_&quot;,
  &quot;type&quot;:&quot;_string_&quot;,
  &quot;storageId&quot;:_number_
  &quot;storageId_string&quot;:&quot;number&quot;
}
</code></pre>
<p>Multiple reference:</p>
<pre><code class="language-json">{
  &quot;name&quot;:&quot;_string_&quot;,
  &quot;type&quot;:&quot;_string_&quot;,
  &quot;storageIds&quot;:[number]
  &quot;storageIds_string&quot;:[&quot;number&quot;]
}
</code></pre>
<h4>Methods</h4>
<p>The methods used for this resource are:</p>
<ul>
<li>GET</li>
</ul>
<h4>Get the named business data reference defined in the case</h4>
<p>Get the named business data reference ({businessDataName} string) defined in the case ({caseId} long).</p>
<ul>
<li><strong>URL</strong><br>
<code>http://../API/bdm/businessDataReference/:caseId/:businessDataName</code><br>
<em>Example</em>: <code>/API/bdm/businessDataReference/1/Contracts</code></li>
<li><strong>Method</strong><br>
<code>GET</code></li>
<li><strong>Success Response</strong><br>
A business data reference (in JSON format)
<ul>
<li><strong>Code</strong>: 200</li>
<li><strong>Payload</strong>:<pre><code class="language-json">{
  &quot;name&quot;: &quot;contracts&quot;,
  &quot;type&quot;: &quot;com.company.model.Contract&quot;,
  &quot;storageIds&quot;: [
    1,2,3,4,5,6,7
  ],
  &quot;storageIds_string&quot;: [
    &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;
  ]
}
</code></pre>
</li>
</ul>
</li>
<li><strong>Error Response</strong>
<ul>
<li><strong>Code</strong>:<br>
400 - when caseId is not a number (long)<br>
404 - when the businessDataName does not match an existing reference of the case or the caseId is not found</li>
</ul>
</li>
</ul>
<h4>Get the business data references defined in the case</h4>
<ul>
<li><strong>URL</strong><br>
<code>/API/bdm/businessDataReference?f=caseId={caseId}&amp;p={pageNumber}&amp;c={pageCount}</code><br>
<em>Example</em>: <code>/API/bdm/businessDataReference?f=caseId=1&amp;p=0&amp;c=10</code></li>
<li><strong>Method</strong><br>
<code>GET</code></li>
<li><strong>Success Response</strong><br>
An array of business data references (in JSON format)
<ul>
<li><strong>Code</strong>:</li>
<li><strong>Payload</strong>:<pre><code class="language-json">[
  {
    &quot;name&quot;: &quot;clients&quot;,
    &quot;type&quot;: &quot;com.company.model.Client&quot;,
    &quot;storageIds&quot;: [ 25, 26, 33, 34, 35, 36 ],
    &quot;storageIds_string&quot;: [ &quot;25&quot;, &quot;26&quot;, &quot;33&quot;, &quot;34&quot;, &quot;35&quot;, &quot;36&quot; ]
  }, {
    &quot;name&quot;: &quot;contracts&quot;,
    &quot;type&quot;: &quot;com.company.model.Contract&quot;,
    &quot;storageIds&quot;: [ 1, 2, 3, 4, 11, 12 ],
    &quot;storageIds_string&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;11&quot;, &quot;12&quot; ]
  },
  {
    &quot;name&quot;: &quot;industry&quot;,
    &quot;type&quot;: &quot;com.company.model.Industry&quot;,
    &quot;storageId&quot;: 1
    &quot;storageId_string&quot;: &quot;1&quot;
  }
]
</code></pre>
</li>
</ul>
</li>
<li><strong>Error Response</strong>
<ul>
<li><strong>Code</strong>:<br>
400 - when caseId or p or c is not a number (long)<br>
200 - when caseId is not found, an empty array is returned</li>
</ul>
</li>
</ul>
<!-- Generated on Wed Dec 04 2019 13:25:31 GMT+0100 (Paris, Madrid) -->