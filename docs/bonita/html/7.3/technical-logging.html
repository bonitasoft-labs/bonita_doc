<div style="position: relative;"><img style="position: absolute; top: -1px; right: -40px; border: 0; z-index=-100;" src="bonita/images/7.3/outOfSupport.png" alt="Out of support"></div>
<h1>Technical logger</h1>
<p>This page describes the technical logger service.</p>
<h2>Purpose</h2>
<p>The purpose of this service is to provide an abstraction to the logging framework to all Bonita BPM Engine services, to facilitate debugging of other services.</p>
<p>The logged messages are not intended to be accessible through the Engine API (see <a href="?page=queriable-logging" ng-click="contentCtrl.goTo($event, 'queriable-logging')">Queriable logger service</a>).</p>
<h2>Usage</h2>
<p>If you are creating a custom implementation of a service, you might be interested in using the technical logging
service. Refer to the implementations of existing services for examples of technical logging service usage (for example the <a href="https://github.com/bonitasoft/bonita-engine/blob/master/services/bonita-authentication/bonita-authentication-api-impl/src/main/java/org/bonitasoft/engine/authentication/impl/AuthenticationServiceImpl.java">AuthenticationServiceImpl</a>).</p>
<p>Basically, the technical logging service exposes a method that receives the following parameters:</p>
<ul>
<li>class name (the source of the log message)</li>
<li>message</li>
<li>throwable (when message is associated with an exception)</li>
<li>severity</li>
</ul>
<p>See the <a href="https://github.com/bonitasoft/bonita-engine/blob/master/services/bonita-log/bonita-log-technical-api/src/main/java/org/bonitasoft/engine/log/technical/TechnicalLoggerService.java">service
interface</a> for details.</p>
<h2>Implementation details</h2>
<p>The technical logger
<a href="https://github.com/bonitasoft/bonita-engine/blob/master/services/bonita-log/bonita-log-technical-slf4j/src/main/java/org/bonitasoft/engine/log/technical/TechnicalLoggerSLF4JImpl.java">implementation</a>
uses SLF4J version 1.6.1 to handle the log. SLF4J itself uses a back-end logging framework to write log messages. See the <a href="?page=logging" ng-click="contentCtrl.goTo($event, 'logging')">logging
overview</a> for more details.</p>
<p>Logged messages are passed to SLF4J with appropriate logger information so the source of the message remains
meaningful.</p>
<h2>Example</h2>
<p>The following example, <code>DelayedRetry</code>, shows how to write messages to the technical log. <code>DelayedRetry</code> can be called from an <a href="?page=event-handlers" ng-click="contentCtrl.goTo($event, 'event-handlers')">event handler</a> that detects failed tasks.</p>
<pre><code class="language-groovy">package com.bonitasoft.handlers;

import org.bonitasoft.engine.api.LoginAPI;
import org.bonitasoft.engine.api.ProcessRuntimeAPI;
import org.bonitasoft.engine.api.TenantAPIAccessor;
import org.bonitasoft.engine.log.technical.TechnicalLogSeverity;
import org.bonitasoft.engine.log.technical.TechnicalLoggerService;
import org.bonitasoft.engine.session.APISession;

public class DelayedRetry implements Runnable {

    /** Id of the task to run again. */
    private long taskId;

    /** Bonita technical logger. */
    private TechnicalLoggerService technicalLog;

    public void setTaskId(long id) {
        taskId = id;
    }

    public void setTechnicalLog(TechnicalLoggerService technicalLog) {
        this.technicalLog = technicalLog;
    }

    @Override
    public void run() {
        try {
//          if (technicalLog
//                  .isLoggable(this.getClass(), TechnicalLogSeverity.TRACE)) {
                StringBuilder message = new StringBuilder();
                message.append(&quot;Starting to wait before trying again task execution &quot;);
                message.append(taskId);
                technicalLog.log(this.getClass(), TechnicalLogSeverity.TRACE,
                        message.toString());
//          }
            
            // Wait for 2 minutes before retry
            Thread.sleep(2*60*1000);
            
//          if (technicalLog
//                  .isLoggable(this.getClass(), TechnicalLogSeverity.TRACE)) {
                StringBuilder message2 = new StringBuilder();
                message2.append(&quot;Will now try task execution &quot;);
                message2.append(taskId);
                technicalLog.log(this.getClass(), TechnicalLogSeverity.TRACE,
                        message2.toString());
//          }
            
            // Get the LoginAPI using the TenantAPIAccessor
            LoginAPI loginAPI = TenantAPIAccessor.getLoginAPI();

            // Log in to the tenant to create a session
            final APISession session = loginAPI.login(&quot;admin&quot;, &quot;bpm&quot;);

            // Get the ProcessRuntimeAPI using the TenantAPIAccessor and the
            // previously created session
            ProcessRuntimeAPI processAPI = TenantAPIAccessor
                    .getProcessAPI(session);

            processAPI.retryTask(taskId);
        } catch (Exception e) {
//          if (technicalLog.isLoggable(this.getClass(),
//                  TechnicalLogSeverity.ERROR)) {
                technicalLog.log(this.getClass(), TechnicalLogSeverity.ERROR,
                        &quot;Error while retyring task execution. Task id: &quot;
                                + taskId, e);
//          }
        }
    }

}
</code></pre>
<!-- Generated on Tue Jun 19 2018 09:27:08 GMT+0200 (Paris, Madrid (heure d’été)) -->