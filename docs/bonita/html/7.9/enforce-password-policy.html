<div style="position: relative;"><a href="https://github.com/bonitasoft/bonita-doc/edit/7.9/md/enforce-password-policy.md"><img style="position: absolute; top: -1px; right: -40px; border: 0; z-index=-100;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a></div>
<h1>Enforce Password Policy</h1>
<p>A Password Policy defines a set of rules to determine whether a new password is valid or not.</p>
<div class="alert alert-info" role="alert">
<p><strong>Note:</strong> For Enterprise, Performance, Efficiency, and Teamwork editions only.</p>
</div>
<h2>Overview</h2>
<p>By default, no password policy is set for users of Bonita. It is therefore highly recommended to set a policy to protect your data.</p>
<p>There are three options:</p>
<ul>
<li>Leave the default setting as is: &quot;non-protected&quot;.</li>
<li>Apply our ready-to-use policy to a tenant. This requires a password to contain the following:
<ul>
<li>at least 10 characters long</li>
<li>at least 2 special characters</li>
<li>at least 2 upper case characters</li>
<li>at least 2 lower case characters</li>
<li>at least 3 digits</li>
</ul>
</li>
</ul>
<p>To apply this policy edit <a href="?page=BonitaBPM_platform_setup" ng-click="contentCtrl.goTo($event, 'BonitaBPM_platform_setup')"><code>security-config.properties</code></a> and change <code>DefaultPasswordValidator</code> to <code>RobustnessPasswordValidator</code>.</p>
<ul>
<li>Create a custom password policy by following the tutorial below.</li>
</ul>
<h2>How to create a custom password policy</h2>
<p>This will enable the System administrator to create a custom class and define the characteristics for a particular password policy.
It will be applied to all users.</p>
<h4>Prerequisites</h4>
<p>You should have Maven installed to create a project.</p>
<p>Import <strong>Toolkitview</strong> into your workspace.</p>
<h2>How to create a Java class containing your own password validation characteristics</h2>
<p>Here are the steps to add a custom password validator:</p>
<ol>
<li>Open Maven, and create a new Maven Project. This will create a pom.xml</li>
<li>Add a new dependency in your pom.xml to get toolkit-view (x.y.z is the Bonita version number).</li>
</ol>
<pre><code class="language-xml">&lt;dependencies&gt;
      &lt;dependency&gt;
          &lt;groupId&gt;org.bonitasoft.console&lt;/groupId&gt;
          &lt;artifactId&gt;console-common&lt;/artifactId&gt;
          &lt;version&gt;x.y.z&lt;/version&gt;
      &lt;/dependency&gt;
  &lt;/dependencies&gt;
</code></pre>
<div class="alert alert-warning" role="alert">
<p><strong>Note:</strong> As this artifact is not available in public repositories, you
have to follow this given procedure (example given for the x.y.z version):</p>
<ul>
<li>retrieve the console-common-x.y.z.jar from a Bonita distribution or live
instance (in the bonita.war or in the exploded war)</li>
<li>retrieve poms from the github repository
<ul>
<li>bonita-console: https://github.com/bonitasoft/bonita-web/blob/x.y.z/pom.xml</li>
<li>console-common: https://github.com/bonitasoft/bonita-web/blob/x.y.z/common/pom.xml</li>
</ul>
</li>
<li>manually put the jars and pom in your local repository or deploy them
into your repository manager
<ul>
<li>bonita-console pom.xml file in &lt;M2_REPO&gt;/org/bonitasoft/console/bonita-console/x.y.z</li>
<li>console-common pom.xml and jar files in &lt;M2_REPO&gt;/org/bonitasoft/console/console-common/x.y.z</li>
</ul>
</li>
</ul>
</div>
<ol start="3">
<li>Create your class, eg. <code>PasswordLengthValidator</code> with a name for the package, eg. <code>org.bonitasoft.ext.password.validator</code>.</li>
</ol>
<pre><code class="language-java">package org.bonitasoft.ext.password.validator;

import static org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n._;

import org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n;
import org.bonitasoft.web.toolkit.client.common.i18n.AbstractI18n.LOCALE;
import org.bonitasoft.web.toolkit.client.data.item.attribute.validator.AbstractStringValidator;
/**
 * @author John Doe
 */
public class PasswordLengthValidator extends AbstractStringValidator {

    @Override
    protected void _check(String password) {
        
        LOCALE Locale = AbstractI18n.stringToLocale(locale);

        // Check number of length
        int minimalLength = 10;
        if (password.length() &lt; minimalLength) {
                addError(_(&quot;Password is not long enough&quot;, Locale));
        }
    }
}
</code></pre>
<ol start="4">
<li>Then, you can build your project. In command-line and type <code>mvn package</code></li>
<li>Go in the <code>target/</code> folder and you have your JAR archive, eg. <code>password-validator-0.0.1-SNAPSHOT.jar</code></li>
<li>Take a bundle and start it once. This will extract the <code>bonita.war.</code></li>
<li>Start it by typing: <code>cd bin</code>then <code>./catalina.sh run</code></li>
<li>Copy your JAR archive in the folder <code>webapps/bonita/WEB-INF/lib</code></li>
<li>Modify all <code>security-config.properties</code> files to add your new password validator. e.g.</li>
</ol>
<pre><code># content of the file
security.password.validator org.bonitasoft.ext.password.validator.PasswordLengthValidator
</code></pre>
<ol start="10">
<li>Start your bundle again
<code>cd bin</code> and then <code>./catalina.sh run</code></li>
<li>Create a new user and check that your password policy has been set.
To check that the validation is correct, you can type a password to force an error. An exception will be displayed listing all the non-filled criteria.</li>
</ol>
<p>If the password complies with the criteria in the new password policy, no exception error message will be displayed.</p>
<!-- Generated on Wed Dec 04 2019 17:46:51 GMT+0100 (Paris, Madrid) -->