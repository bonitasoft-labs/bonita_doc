<div style="position: relative;"><a href="https://github.com/bonitasoft/bonita-doc/edit/7.9/md/declare-contracts.md"><img style="position: absolute; top: -1px; right: -40px; border: 0; z-index=-100;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a></div>
<h1>Declare contracts</h1>
<p>So far our process defines a sequences of events and tasks, and declares a business variable that it will instantiate and update when executed. We want to instantiate our <code>claim</code> business variable using the description provided by the customer when they start the process. We will also need to update the claim with the answer provided by the employee and with the satisfaction rating provided by the customer. We need a way to collect information from the user and store it in the business variable. This is achieved using the user interfaces (web forms by default in Bonita) and based on another concept: contract.</p>
<p>A contract defines the data expected from the user to start a process (instantiation contract) or to execute a user task (task contract). By default Bonita offers a solution to easily build forms (see next chapter) to allow the user to view and provide data. When submitted, forms will ask the Bonita Engine to start a process or execute a task using provided data that must match what is expected by the contract.</p>
<p>As our contract information will be used to set business variable values, we can use a wizard that will generate the contract based on the business variable. This wizard also sets the business variable default value and generates task operations.</p>
<p>Create the contract for process instantiation:</p>
<ol>
<li>
<p>Select the process pool</p>
</li>
<li>
<p>At the bottom of the Bonita Studio window go to the <strong>Execution &gt; Contract</strong> tab</p>
</li>
<li>
<p>Click on the <strong>Add from data...</strong> button</p>
</li>
<li>
<p>Leave the default options selected (<em>Business variable</em>, <em>Instantiate</em>, <em>claim</em>, <em>claimInput</em>)</p>
</li>
<li>
<p>Click on the <strong>Next</strong> button</p>
</li>
<li>
<p>Select only the <em>description</em></p>
</li>
<li>
<p>Click on <strong>Finish</strong></p>
</li>
<li>
<p>You can ignore the information message and click on <strong>OK</strong> button</p>
<p><img src="bonita/images/7.9/getting-started-tutorial/declare-contracts/declare-process-instantiation-contract.gif" alt="Declare process instantiation contract" title="Declare process instantiation contract"></p>
</li>
</ol>
<div class="alert alert-info" role="alert">
<p>You now have a contract named <em>claimedInput</em> of type &quot;COMPLEX&quot; with one attribute, <em>description</em> of type &quot;TEXT&quot;. Also, as the description is mandatory, you can see in <strong>Execution &gt; Contract &gt; Constraints</strong> tab that a validation rule has been created to make sure that we get a value for the description. Finally, if you edit the <em>claim</em> business variable, you can see that a script has been generated for you to set the variable default value. Setting this value will trigger an insert in the <code>CLAIM</code> table created for you in the business data database managed by Bonita.</p>
</div>
<p>Now let's create the contract for the user task <em>Review and answer claim</em>:</p>
<ol>
<li>
<p>Select the task <em>Review and answer claim</em></p>
</li>
<li>
<p>At the bottom of the Bonita Studio window go to <strong>Execution &gt; Contract</strong> tab</p>
</li>
<li>
<p>Click on the <strong>Add from data...</strong> button</p>
</li>
<li>
<p>Select Data: <em>Business variable</em>, Action: <em>Edit</em>, and leave other options with their default values</p>
</li>
<li>
<p>Click on the <strong>Next</strong> button</p>
</li>
<li>
<p>Select only the <em>answer</em></p>
</li>
<li>
<p>Click on the <strong>Finish</strong> button</p>
</li>
<li>
<p>You can ignore the warning message and click on the <strong>OK</strong> button</p>
<p><img src="bonita/images/7.9/getting-started-tutorial/declare-contracts/declare-user-task-contract.gif" alt="Declare user task contract" title="Declare user task contract"></p>
</li>
</ol>
<div class="alert alert-info" role="alert">
<p>We now have a contract for the step. This contract does not create a new claim but rather updates an attribute of the claim (the claim is created when we start the process). The attribute update is performed by an operation (generated for you) on the task. Select <strong>Execution &gt; Operations</strong> to view the operation that updates the <em>answer</em> attribute.</p>
</div>
<p>Create the contract for <em>Read the answer and rate it</em> task:</p>
<ol>
<li>Do exactly as you did for <em>Review and answer claim</em> task</li>
<li>Select <em>satisfactionLevel</em> as the attribute to use in the contract</li>
</ol>
<p>You can now click on the Bonita Studio <strong>Run</strong> button to deploy and execute this updated version. You will see that you get auto-generated forms based on the contract. In the overview form, you will see the data being stored in the business variable. Note that a form will not display previously captured data. We will address that in the <a href="?page=create-web-user-interfaces" ng-click="contentCtrl.goTo($event, 'create-web-user-interfaces')">next chapter</a>.</p>
<!-- Generated on Wed Dec 04 2019 17:46:51 GMT+0100 (Paris, Madrid) -->