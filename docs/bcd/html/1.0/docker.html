<div style="position: relative;"><a href="https://github.com/bonitasoft/bonita-continuous-delivery-doc/edit/1.0/md/docker.md"><img style="position: absolute; top: -1px; right: -40px; border: 0; z-index=-100;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"/></a></div>
<h1>BCD controller Docker image</h1>
<p>This Docker image provides a ready-to-use environment to launch Bonita Continuous Delivery Ansible playbooks.</p>
<h2>Install the image</h2>
<h3>From pre-built image</h3>
<p>A pre-built BCD controller image is provided with BCD deliverable as a <code>bcd-controller_&lt;version&gt;.tar.gz</code> archive. It is located in the <code>bonita-continuous-delivery_&lt;version&gt;/docker</code> directory.</p>
<p>Load this image into Docker engine as follows:</p>
<pre><code>$ cd bonita-continuous-delivery_&lt;version&gt;/docker
$ gunzip -c bcd-controller_&lt;version&gt;.tar.gz | docker load
Loaded image: bonitasoft/bcd-controller:&lt;version&gt;
Loaded image: bonitasoft/bcd-controller:latest
</code></pre>
<h3>From source</h3>
<p>You can also build the image from source. Its Dockerfile is provided with BCD deliverable in the <code>bonita-continuous-delivery_&lt;version&gt;/docker</code> directory.</p>
<p>Build the image as follows:</p>
<pre><code>$ cd bonita-continuous-delivery_&lt;version&gt;/docker
$ docker build -t bonitasoft/bcd-controller .
</code></pre>
<h2>Use the image</h2>
<h3>Configure AWS credentials</h3>
<p>Dynamic Amazon EC2 inventory management for Ansible runs on top of <a href="https://aws.amazon.com/sdk-for-python/">Boto</a>.</p>
<p>Boto's configuration requires the following <code>.boto</code> file to exist in the Docker container's <code>/home/bonita</code> directory.</p>
<pre><code>[Credentials]
aws_access_key_id = &lt;YOUR_AWS_ACCESS_KEY&gt;
aws_secret_access_key = &lt;YOUR_AWS_SECRET_ACCESS_KEY&gt;
</code></pre>
<h3>Start a container</h3>
<pre><code>$ docker run --rm -t -i --name bcd-controller \
    -v &lt;local_path_to_.boto&gt;:/home/bonita/.boto \
    -v &lt;local_path_to_bonita-continuous-delivery_folder&gt;:/home/bonita/bonita-continuous-delivery \
    -v &lt;local_path_to_ssh_private_key&gt;:/home/bonita/.ssh/&lt;ssh_private_key&gt; \
    bonitasoft/bcd-controller /bin/bash
$ cd /home/bonita/bonita-continuous-delivery
</code></pre>
<!-- Generated on Tue Jan 30 2018 16:02:14 GMT+0100 (Paris, Madrid) -->